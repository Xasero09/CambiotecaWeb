<div class="form-page-container">
  <div class="form-card">
    <h2>Cambiar Contraseña</h2>
    <p class="subtitle">Ingresa tu contraseña actual y una nueva.</p>
    
    <div *ngIf="errorMessage" class="message error">
      {{ errorMessage }}
    </div>

    <form *ngIf="!notificationMessage" [formGroup]="changeForm" (ngSubmit)="onSubmit()" class="form-body">
      
      <div class="form-group">
        <label for="current">Contraseña Actual</label>
        <input type="password" id="current" formControlName="current">
      </div>

      <div class="form-group">
        <label for="new">Nueva Contraseña</label>
        <input type="password" id="new" formControlName="new">
        <div *ngIf="changeForm.get('new')?.touched && changeForm.get('new')?.errors?.['minlength']" class="validation-error">
          La contraseña debe tener al menos 6 caracteres.
        </div>
      </div>

      <div class="form-group">
        <label for="confirm">Confirmar Nueva Contraseña</label>
        <input type="password" id="confirm" formControlName="confirm">
        <div *ngIf="changeForm.get('confirm')?.touched && changeForm.get('confirm')?.errors?.['passwordsDoNotMatch']" class="validation-error">
          Las contraseñas no coinciden.
        </div>
      </div>
      
      <button type="submit" [disabled]="isLoading || changeForm.invalid" class="btn-submit">
        {{ isLoading ? 'Guardando...' : 'Cambiar Contraseña' }}
      </button>
    </form>

    <div class="form-footer-link" *ngIf="!notificationMessage">
      <a routerLink="/perfil">Cancelar y volver al Perfil</a>
    </div>
  </div>

  <app-notification 
  *ngIf="notificationMessage" 
  [message]="notificationMessage" 
  type="success"
  (close)="onNotificationClose()"> 
  </app-notification>
</div>