<div class="add-book-container">
  <h2>A침adir un Nuevo Libro al Cat치logo</h2>
  <p class="subtitle">Completa los detalles de tu libro para que otros puedan encontrarlo.</p>

  <form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="book-form">
    
    <!-- Fila 1: T칤tulo y Autor -->
    <div class="form-row">
      <div class="form-group">
        <label for="titulo">T칤tulo del Libro</label>
        <input type="text" id="titulo" formControlName="titulo">
      </div>
      <div class="form-group">
        <label for="autor">Autor</label>
        <input type="text" id="autor" formControlName="autor">
      </div>
    </div>

    <!-- Fila 2: ISBN y A침o de Publicaci칩n -->
    <div class="form-row">
      <div class="form-group">
        <label for="isbn">ISBN (13 d칤gitos)</label>
        <input type="text" id="isbn" formControlName="isbn">
      </div>
      <div class="form-group">
        <label for="anio">A침o de Publicaci칩n</label>
        <input type="number" id="anio" formControlName="anio_publicacion">
      </div>
    </div>

    <!-- Fila 3: Editorial y G칠nero -->
    <div class="form-row">
      <div class="form-group">
        <label for="editorial">Editorial</label>
        <input type="text" id="editorial" formControlName="editorial">
      </div>
      <div class="form-group">
        <label for="genero">G칠nero</label>
        <select id="genero" formControlName="id_genero">
          <option [ngValue]="null" disabled>Selecciona un g칠nero</option>
          <option *ngFor="let genero of generos" [value]="genero.id_genero">{{ genero.nombre }}</option>
        </select>
      </div>
    </div>

    <!-- Fila 4: Estado y Tipo de Tapa -->
    <div class="form-row">
      <div class="form-group">
        <label for="estado">Estado del Libro</label>
        <select id="estado" formControlName="estado">
          <option value="Nuevo">Nuevo</option>
          <option value="Como nuevo">Como nuevo</option>
          <option value="Buen estado">Buen estado</option>
          <option value="Con desgaste">Con desgaste</option>
        </select>
      </div>
      <div class="form-group">
        <label for="tapa">Tipo de Tapa</label>
        <select id="tapa" formControlName="tipo_tapa">
          <!-- 游녢 --- CAMBIO REALIZADO AQU칈 --- 游녢 -->
          <option value="Tapa blanda">Tapa blanda</option>
          <option value="Tapa dura">Tapa dura</option>
        </select>
      </div>
    </div>

    <!-- Fila 5: Descripci칩n -->
    <div class="form-group full-width">
      <label for="descripcion">Descripci칩n</label>
      <textarea id="descripcion" formControlName="descripcion" rows="4" placeholder="A침ade detalles como el estado de las p치ginas, si tiene alguna marca, etc."></textarea>
    </div>

    <!-- Fila 6: Subida de Im치genes -->
    <div class="form-group full-width">
      <label for="imagenes">Im치genes del Libro</label>
      <input type="file" id="imagenes" accept="image/*" multiple (change)="onFilesSelected($event)" class="file-input">
      <small>Puedes subir varias im치genes. Haz clic en una para seleccionarla como portada.</small>
    </div>

    <!-- Fila 7: Previsualizaci칩n de Im치genes -->
    <div *ngIf="previews.length > 0" class="image-previews-container">
      <div *ngFor="let preview of previews; let i = index" 
           class="preview-item" 
           (click)="setAsCover(i)"
           [class.is-cover]="i === coverIndex">
        <img [src]="preview" alt="Previsualizaci칩n de imagen">
        <div class="cover-badge">{{ i === coverIndex ? 'Portada' : 'Elegir' }}</div>
      </div>
    </div>

    <!-- Mensajes y Bot칩n de Env칤o -->
    <div class="form-footer">
      <div *ngIf="successMessage" class="message success">{{ successMessage }}</div>
      <div *ngIf="errorMessage" class="message error">{{ errorMessage }}</div>
      
      <button type="submit" [disabled]="bookForm.invalid || isLoading">
        {{ isLoading ? 'A침adiendo...' : 'A침adir Libro' }}
      </button>
    </div>
  </form>
</div>

